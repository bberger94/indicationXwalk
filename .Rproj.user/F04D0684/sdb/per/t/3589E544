{
    "collab_server" : "",
    "contents" : "rm(list = ls())\n\n#Load these packages:\npackages <- c('rio', 'dplyr', 'icd')\nfor(package in packages){\n  #INSTALL PACKAGES BEFORE RUNNING SCRIPT FOR FIRST TIME BY UNCOMMENTING LINE BELOW\n  #install.packages(package) #if asked to restart, choose NO\n  library(package, character.only = T)\n}\n\n#Load indication -> icd9 crosswalk\nxwalk.icd9 <-\n  import('data/Cortellis_Drug_Indication_ICD9_Crosswalk.dta') %>% \n  filter(condition != 'unidentified indication') %>% \n  arrange(icd9)\n\n#Replace these (incorrect) codings\nxwalk.icd9$icd9[xwalk.icd9$icd9 > 999] <- NA\n\n#Use icd package to code as icd9\nxwalk.icd9$icd9 <-\n  xwalk.icd9$icd9 %>%\n  as.character() %>%\n  as.icd9()\n\n#Replace icd9s with character codings\nxwalk.icd9$icd9 <- icd_short_to_decimal(xwalk.icd9$icd9)\n\n#Load revised matches\nxwalk.icd9 <- \n  import('data/validatedInd2ICD/cancer/Cortellis_Drug_Indication_ICD9_Crosswalk_Cancer_ben.xlsx') %>% \n  select(condition = cortellis_condition,\n         revised_icd9 = revised_icd9_ben,\n         malignant_not_specified) %>% \n  right_join(xwalk.icd9, by = 'condition')\n\n#Replace ICD-9s with revised ICD-9s\nxwalk.icd9$icd9[!is.na(xwalk.icd9$revised_icd9)] <-\n  xwalk.icd9$revised_icd9[!is.na(xwalk.icd9$revised_icd9)]\n\n#Replace ICD-9s where there is no appropriate match with NA\nxwalk.icd9$icd9[xwalk.icd9$revised_icd9 == 'No appropriate ICD-9'] <- NA\n\n#Replace revised icd9s with character codings\nxwalk.icd9$icd9 <- icd_short_to_decimal(xwalk.icd9$icd9)\n\n#Replace malignant_not_specified with 0 if NA\nxwalk.icd9$malignant_not_specified[is.na(xwalk.icd9$malignant_not_specified)] <- 0\n\n",
    "created" : 1501252906361.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3093059996",
    "id" : "3589E544",
    "lastKnownWriteTime" : 1501269874,
    "last_content_update" : 1501269874989,
    "path" : "C:/Users/bergerb/Dropbox/bkthruWork_local/indicationXwalk/source/add_xwalk_revisions.R",
    "project_path" : "source/add_xwalk_revisions.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}